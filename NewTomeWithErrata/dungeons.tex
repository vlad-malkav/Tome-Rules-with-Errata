\section{The Constructanomicon}
\vspace*{-10pt}
\quot{``How does that even stay up?"}

Perhaps the most important question surrounding Dungeons and Dragons is the question why there are Dungeons and Dragons. When you think about it, that's pretty weird.

\subsection{Dungeons: By the Gods, Why?}

Alright, we know that you love dungeons. We love them too, despite the fact that we're pretty sure there is no good reason for the silly things. The average D\&D game world is frankly incapable of the technology or manpower needed to build vast underground complexes. I mean, look at our own world history: aside from a single underground city in Turkey and a couple of pyramids and tombs, the ancient world took a pass on underground life. Even the old excuse of ``Wizards can magic it up and they do it because its defensible'' is a bit lame considering that we are talking about a world with teleport and burrowing and ethereal travel; being underground is actually a liability since its harder to escape and people can drop the roof onto you, not to mention the incredible costs involved in doing it even if magic is available.

So here is what we suggest: dungeons have an actual magical purpose. By putting anything behind at least 40' of solid, continuous material (like solid walls of dirt, stone, ice, or whatever, but not a forest of trees or rooms of furniture) the area is immune to unlimited-range or ``longer than Long Range'' spells like Scrying and transportation magic like teleport, greater teleport, the travel version of gate, and other effects. You can use these magics inside a dungeon, but you also stopped by a 40' solid, continuous material in a Line of Effect; this means you can use these effects inside a dungeon to bypass doors and walls, but entering and leaving the dungeon is a problem, and parts of the dungeon that have more than 30' of material in the way between your position and the target of your effect will be effectively isolated from your position.

In summary, in a best-case scenario you can transport yourself to a dungeon, then bust in the entrance and enter the dungeon, then transport yourself to the place you want to be inside the dungeon. In a worse-case scenario, the dungeon designer will have built the dungeon in such a way that only someone aware of the layout can take full advantage of unlimited range or transportation spells like teleports and Scry, or even that most or all areas if the dungeon are inaccessible to these effects.

Of course, there are exceptions. The idea of permanent portals, gates, or teleport circles are just too common in D\&D and too fun to just abandon. Permanent effects will continue to regardless of materials in the way, and will be the premier way to enter and leave dungeons, as well as the best way to move inside a dungeon.

By incorporating these changes in your D\&D world, you are ensuring that players actually explore rooms in your dungeons that you have painstakingly built, you avoid all the problems with Scry-and-Die tactics, and you'll find that players actually care about dungeon geography. It also adds a bit to suspension of disbelief in your setting, which is only good for a cooperative storytelling game.

\subsubsection{Dungeons: building dungeons for fun, profit, and defense}
As an old hand at D\&D, I've seen more dungeons than I can count. Most have followed a ``random generator and a new pad of graph paper'' philosophy to dungeon construction, and frankly that's got to go. Here are a few tips to constructing a dungeon that makes real sense:

\subsubsection{Chokepoints Are Your Friend}
Most dungeons are built like a modern building: ease of use and easy access are emphasized. Don't do that. Remember that a dungeon is built with the idea that it will be invaded at some point by a hostile and possibly supernatural attacker. At the very least, this means that rooms will not have doors to every adjacent room, and single hallways to single rooms will also be avoided.

Chokepoints are your single most important consideration. You want to make sure that attackers get bottled up in them and your forces don't get caught up in them. That's trickier than it sounds. Generally, place your chokepoints at the entrances and exits of your dungeon, and possibly at ``fall back'' positions where troops can make another stand if their position is overrun. Key locations should have their own chokepoints like prisons, treasuries, and quarters for potentially hostile quests. Locations that should not be blocked off by choke points include barracks, armories, and key storage rooms, since you never know when your troops might need some arms or materials to react to a threat.

\subsubsection{The Three ``M''s: Mobility, Manpower, and Morale}

A dungeon is built to house a fighting force, and several considerations come into play in its design. If your dungeon is an abandoned ruin, then the current residents might not exploit these features, but be sure that the original designers had them in mind..

\textbf{Mobility:} Choke points are the first stage in the idea of mobility, as they assume that your enemies will be stuck gathering their forces at once point and behind that chokepoint you are gathering your forces as well; however, that does not need to be true. The designers of a dungeon can easily place one-way secret doors that allow them to get behind an enemy position and outflank an enemy, sending forces from two sides to crush an enemy.

Also, the common feature of long hallways with rooms off to the sides must be avoided. While this is a simple arrangement (and easy to draw on graph paper), it allows attackers to make straight shots toward key areas. It is better to mix-up the layout of non-essential rooms like storerooms so that enemy forces become split as they search rooms and take different routes. A common mistake like a long hallway or a central room with doors allows the enemy to send scouting forces to check rooms, then they can quickly surge forward if one of those forces finds a threat. It is better to split an enemy's forces between several collections of rooms, leaving groups isolated in the event of a counterattack.

\textbf{Manpower:} A well-designed dungeon needs guardians, and there are no solid rules about who you need in your dungeon. Generally, you want troops that are loyal, intelligent, and powerful, but often other considerations come into play. Dumb beasts can be chained at a choke point, and they are perfectly suitable as guardians, and large numbers of weak but smart defenders can set off traps, block passages, or slow the advance of the enemy with caltrops or even their own lifeblood. Depending on the type of guardians the dungeon was intended for, it can have wildly different layouts. For example, a dungeon may have a room that is merely a pit with ladders leading to an entrance and exit, and this room simply houses a dangerous beast like a Dire Bear. Any enemy who wants to take this chokepoint would need to fight the bear. Another example could be a dungeon designed to have kobolds as defenders; this kind of dungeon may have small-sized corridors so that they can move quickly from rooms to room (so that any medium-sized creature must squeeze in) and covered shooting galleries where the kobolds can use crossbows to fire on attackers from relative safety.

\textbf{Morale:} An often overlooked aspect of dungeon construction is morale, which is the simple question of ``are my troops happy enough to stay and confident enough to fight.'' Kitchens and ample food stores are a good first place to start, as are comforts like good barracks or personal rooms, timely payment of salary, and amusements. While a Half-fiend Chimera can be locked in box without food or air, its loyalty and willingness to fight is definitely in question. Some dungeon creators use mindless beasts or unintelligent monsters like oozes, while other creators use controlled monsters like undead, but these troops are generally less effective than dedicated and intelligent troops.

If the dungeon has luxuries like escape routes, common rooms to socialize in, entertainments like gaming rooms, and places to worship gods, troops will be more willing to fight when attackers threaten. Without these things, troops might surrender or flee from a hostile threat, or even turn on the dungeon creator.

\subsubsection{Form Follows Function}

Sometimes, dungeons can be designed in a crazy fashion that is fun to play in, but makes no tactical sense. That's fine, since it can mean that the dungeon was built as part of a magical effect or for some mystical reason. A certain arrangement of rooms may create a dungeon-wide effect that blocks ethereal travel or teleportation, or maybe the fact that the dungeon is arranged like a demon's face means that the dungeon is a giant mystical trap for a bound demon.

The sky is the limit for this kind of thing, and we encourage you to ``go nuts" as it creates flavorful dungeons that you will remember years later. I'm certain people are more likely to remember a dungeon built as a giant hive with hexagonal rooms, honeycombed passages, and undead bees than they are going to remember a standard temple of Orcus.

\subsubsection{Castles and Manors: Taking the Dungeon out of the Dungeon}

Traps, choke-points, humanoid defenders, and monstrous occupants can all be found guarding treasures and lifestyles above ground as well as below. Unfortunately, a building that extends above the surface is inherently more vulnerable than a true Dungeon to the most feared of D\&D tactics: Scry \& Die.

\subsubsection{Unimportance}

While a castle is by definition subject to scry \& die tactics, the number of creatures actually capable of pulling that off is fairly limited and if they don't care enough about your buildings, you're pretty safe. A building doesn't have to be bereft of valuable loot and major players in the game of thrones to avoid teleport assaults -- it just has to look that way. In many ways a run-down shack is safer than a gleaming adamantine fortress. And that means that illusions like hallucinatory terrain and mirage arcana are very valuable to any fortress whose purpose is to keep its occupants and their treasure safe. If no one cares, your swag and your family are safe.

\subsubsection{Magically Foiling Diviners}

When you don't have 40' of solid stone between you and the hostile world outside, scry \& die is a real problem for you. Especially if you're trying to keep order and rule a region, and therefore hiding your fortress really isn't an option, magically protecting yourself from attack magic is going to look pretty tempting. For those of you who are old school, attention has to be drawn to the fact that \spell{nondetection} actually doesn't work at all. It costs you money every day, and the would-be teleport assassins have a chance of spell failure every time they attempt to scry on your location. But nothing happens to them if it doesn't work, so at best \spell{nondetection} makes them try again later. Eventually they're still going to come for you, and you're out a small pile of diamond dust.

The big winners here are \spell{mirage arcana} and \spell{mindblank}. \spell{Mindblank} always wins, even against gods, but it only stops people from pulling a scry \& die on you. Your enemies can still teleport ambush your house, or your butler, and just sort of assume that if your servants are preparing your favorite food in your house that you're probably in there somewhere. This means that if you are living a high profile gangster lifestyle, \spell{mindblank} is of limited utility, but if you are willing to be a shadowy sage who lives on a demiplane somewhere that no one has heard of, it's totally the win. Mirage arcana simply makes a room appear as a different room. This means that when someone attempts a scry \& die, they end up shunted to some completely different room that presumably has deadly magical traps all over it. Unfortunately, there are ways for a clever diviner to bypass that sort of thing, and there's not a whole lot you can do about it. Ultimately, only stupid Wizards lose when they pull Scry \& Die, so based on the Intelligence requirements of Wizarding\ldots\  you pretty much know how this is going to go down. Still, a clever Illusion trap can nab an impatient Wizard, and that's often good enough.

A special shout-out needs to go to \spell{dimensional lock}, because the effects on would-be teleport assassins is hilarious. It doesn't cause the spell to fail, it merely stops dimensional movement into the warded area. So the assassin moves to the Astral Plane, is shifted at high speed over to the segment that corresponds to next to your bed, and then the shift back into the material world fails. This leaves them all buffed up and stranded on the Astral Plane. You can even amuse yourself by putting lethal traps on that portion of the Astral Plane to nail these guys on the way in. The downside of course is that a lock is only 40 feet across, so covering enough of a castle to make teleport ambushes impractical is difficult. Still, if you have enough 8th level spell slots lying around (or less, remember that it's a lower level spell for the Summoner), it provides the basis of some very nice protection. Also good is the fact that since dimensional locks can be tiled, it can also leave spaces that you can use as a means of entrance/egress and which can be potentially defended if they are used as attack points by hostiles.

The \spell{anticipate teleport} line of spells is a cantrip on the Summoner list for a reason. Those spells don't actually stop a scry \& die, and the areas are very small and duration unexceptional. Even if you are a Summoner, defending your house with \spell{anticipate teleport} is probably implausible. The final consideration is the elephant in the room: \spell{Screen}. It's an enormously powerful spell where it fools scrying ``automatically", but unfortunately it is defined so vaguely as to be essentially unusable without creating an argument. Which is really a shame, because it's otherwise the best hope for defending yourself. Your best bet is to make certain key rooms appear like other rooms so that teleport ambushes end up in the wrong areas -- which means that it's basically just \spell{mirage arcane} that's several levels higher.

\subsubsection{The Public Square: When Divination Doesn't Matter}

Sometimes your building is Courthouse, or a Market, or a Factory, and the entire point is that the general public goes in and out of the building all the time. In such a circumstance, all the divination magic in the world doesn't mean anything because your enemies can actually just walk into your building to scout the place for a teleport ambush or even buff themselves up on the outside and then run in while 1/round a level spells are counting down their awesome. In these circumstances, you're going to want a fall-back position to be readily available on little or no notice. Contingent magic and magical traps may well want to pull key personnel out rather than send summoned monsters or impediments in. After all, if you put off the final confrontation for 20 minutes, the teleport ambush has essentially failed.

\subsection{Traps}
\vspace*{-8pt}
\quot{``How did that boulder not crush those displacer beasts?"}

Dungeons are classically filled with monsters and traps. That can be cool, but I'll be the first to admit that it's pretty weird. Traps and monsters are profoundly counter synergistic.

\subsubsection{Designing Traps}

There are numerous collections of devious traps that can easily kill a single character or an entire party. But let's face it: most of them are dumb. Making a trap that will kill or humiliate characters doesn't make you a genius, making traps that kill player characters is easy. Just have the roof cave in to inflict more damage than the PCs have in hit points, it's not even hard. The difficulty is making traps that make sense, as well as traps that will add to the enjoyment of the game rather than paralyze it with a continuous ``I check the banister, Mother May I?" fest.

\subsubsection{Placing Traps}

For a trap to be effective, it has to have essentially no chance of backfiring against its creators. Remember that the dungeon occupants are going to spend a lot more time in the vicinity of any traps than any invading force is, so there has to be a pretty good reason why the trap wouldn't backfire. Traps can cordon off areas that are too big or too small for the normal residents to set them off (Kobolds might put in a collapsing floor that triggered off a weight of over 100 pounds, and Stone Giants might put nasty traps all over any 5' hallways that ran through a dungeon they occupied), or areas that are for whatever other reason off-limits (Dwarves might trap tapped-out shafts in their mines to nail burrowing monsters trying to sneak in the back way). Some traps sound like they'd be plenty selective enough to put everywhere -- like magical symbols that only blast the forces of Good or heretics who don't follow your god. Be careful with those, as just because they won't explode on any of the normal residents doesn't mean that they won't be a liability. After all, what's the point of being a Cleric of Loviatar if you can't have captured Paladins brought to your chambers for interrogation?

Traps can also be left in an ``inactive" state much of the time, and then triggered into activity only when the dungeon's occupants believe that they are under attack. A switch that activates traps in many non-essential areas (like the rec room or the loading dock) is a very real possibility. These can also be activated in layers, a prearranged fallback point might have the mechanisms to activate traps in the outer area that has presumably been compromised by intruders.

Remember that a trap, once active, makes an area more difficult to use. Sometimes that's OK, as is the case when the area in question is being invaded by Bugbears or is itself a tomb prison meant to hold a powerful demon god. But sometimes that's really inconvenient. Active traps just don't make any sense in the mess hall or the barracks. Your own soldiers are going to fall into that pit full of spikes about a thousand times more often than invading adventurers are if you put it right next to the beer kegs.

\subsubsection{Organizational Traps}

The least obvious, but in many ways most useful trap is one which simply allows defenders to respond appropriately to an oncoming attack. An alarm spell is, in the right hands, the most powerful trap in the core rules. You can put it anywhere, and all it does is make a sound when someone enters the area. Like the bell that sounds when you enter a 7-11, the effects of this trap do not meaningfully interfere with the normal operations of the facility they are ensconced in. These traps have as their core utility that they alert the defenders or delay an attacker. Really swank traps will do both.

Obviously, these traps are only worth anything if you have defenders. But remember that a dungeon filled with giant centipedes, or some other mindless monster really isn't going to take full advantage of an alarm system (a ringing bell may wake a sleeping mindless defender up, but it's not going to be able to figure out whether the bell indicates a customer or an invader). Traps designed to misdirect, delay, or otherwise hamper invading forces are only going to appear in unoccupied regions of a dungeon if they are capable of diverting unauthorized entrants into lethal traps. The name for that kind of set-up is a ``Rube Goldberg Mechanism" and it generally has no place in D\&D. Looney Tunes or Mousetrap perhaps, but generally not Dungeons and Dragons.

\subsubsection{Lethal Traps}

Lethal traps are in no way less dangerous to their creators than they are to invaders. Remember always that the creatures in a dungeon intend to live there for perhaps years or even centuries, and the statistics on mine fields just aren't good. The residents of a dungeon have to be completely convinced that a potential trap can't cut off their jangly bits when they are making their way to the privy in the middle of their sleep cycle. That doesn't even mean that lethal traps can be in places that unauthorized residents aren't allowed (like the master's bedchamber) -- that's going to end up beheading servants and guests.

Lethal traps appear in only a couple of kinds of places:

\listone
    \item \textbf{Battlefields:} If an area is contested, right now, having a lethal trap in there is an antisocial but plausible technique.
    \item \textbf{Deserted Regions:} If you leave the dungeon to go on a pilgrimage to a Planar Touchstone that you dig, it's quite thinkable to activate some nasty traps while you're gone.
    \item \textbf{Inaccessible Areas:} If you take over a Brownie hole, there's going to be a lot of crazy hallways that you can't even get into. Filling the mouse holes with mousetraps is fine.
    \item \textbf{Vaults:} If you have something, like a repository of important treasure perhaps, that is really hard to open and is supposed to be used infrequently and possibly only in some sort of crazy ``two guys whip out their keys at the same time" scheme -- trapping that is totally expected.
    \item \textbf{Discerning Traps:} Some magical traps are able to detect certain kinds of creatures and only detonate on specific ones. Unless you're a crazy loner wizard who has no friends and conducts no commerce, those are pretty much a liability. But hey, if you are a Lich-Master Hermit, then those sorts of traps are fine.
\end{list}

\vspace*{8pt}

What this means is that if a dungeon isn't on a war footing right now, any lethal traps in it are probably going to be inactive. If the hobgoblins don't believe that they are under attack right now, the pressure plates all over the dungeon are going to be in their locked position and opening doors is not going to cause poison blades to shoot out. Once they fall back and pull the ``totally being attacked" lever -- then you can go back to worrying if Gygaxian traps lurk behind every door or neck-level tripwires might release torrents of green slime.

\subsubsection{Living Traps}

Some creatures are essentially traps, distinct only in that they have a Wisdom and Charisma score. The monstrous spider, the dire bear in a pit, and the golem are all classics, but the sky is really the limit here. Creatures can act like guard dogs if they are intelligent or magically controlled enough to tell friend from foe. Or they can act like punji sticks at the bottom of a pit if they are uncontrolled.

To be useful to a dungeon's occupants, a living trap has to be unable to turn on its masters. The occupants live in this place so any ``wandering monsters" had best be capable of discerning intruders from VIPs. Any monsters that can't make discernments like that need to be kept in cages or other inaccessible regions of the dungeon until someone specifically unleashes them in the event of a dungeon invasion. What this means for a dungeoneer is that successfully disguising yourself as a Dungeon Resident will keep the trained displacer beasts from attacking you. Furthermore, if you sneak into a dungeon, the untrainable creatures (monstrous vermin, ooze monsters, whatever) are all going to be locked up until an alarm gets sounded. A little discretion can make the dungeon environs a lot safer for the would-be raiders.

\subsubsection{Beneficial Traps}

Game mechanically, any localized triggered magical event is a ``trap". So if you whip out a room that heals everyone in it every round or an immobile pool that you can scry right out of, that's going to be a trap as far as the game is concerned. That means that the residents of a dungeon can shill out surprisingly small amounts of nuyen to get their pads to do all kinds of crazy stuff. Unlimited healing, permanent scrying pools, and more will be a fact of many rooms in virtually any dungeon. Moving these things is impractical, so ownership of a dungeon can be a very lucrative proposition
